{"ast":null,"code":"import { CartService } from '@ng-shop/cart';\nimport { OrdersService } from '../../services/order.service';\nimport { Subject, takeUntil } from 'rxjs';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-shop/cart\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"primeng/button\";\nfunction OrderSummaryComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"p-button\", 6);\n    i0.ɵɵlistener(\"onClick\", function OrderSummaryComponent_div_21_Template_p_button_onClick_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.navigateToCheckout());\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let OrderSummaryComponent = /*#__PURE__*/(() => {\n  class OrderSummaryComponent {\n    constructor(cartService, ordersService, router) {\n      this.cartService = cartService;\n      this.ordersService = ordersService;\n      this.router = router;\n      this.totalPrice = 0;\n      this.endSubs$ = new Subject();\n      this.isCheckout = false;\n      this.router.url.includes('checkout') ? this.isCheckout = true : this.isCheckout = false;\n    }\n    ngOnInit() {\n      this._getOrderSummary();\n    }\n    ngOnDestroy() {\n      this.endSubs$.complete();\n    }\n    _getOrderSummary() {\n      this.cartService.cart$.pipe(takeUntil(this.endSubs$)).subscribe(cart => {\n        this.totalPrice = 0;\n        if (cart) {\n          cart.items.map(item => {\n            if (item.productId) {\n              this.ordersService.getProduct(item?.productId).subscribe(product => {\n                this.totalPrice += product.product.price * item.quantity;\n              });\n            }\n          });\n        }\n      });\n    }\n    navigateToCheckout() {\n      this.router.navigate(['/checkout']);\n    }\n  }\n  OrderSummaryComponent.ɵfac = function OrderSummaryComponent_Factory(t) {\n    return new (t || OrderSummaryComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.OrdersService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  OrderSummaryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderSummaryComponent,\n    selectors: [[\"ng-shop-order-summary\"]],\n    decls: 22,\n    vars: 7,\n    consts: [[1, \"order-summary\"], [1, \"summary-price\"], [1, \"free\"], [1, \"to-checkout\"], [\"class\", \"checkout-button\", 4, \"ngIf\"], [1, \"checkout-button\"], [\"label\", \"checkout\", 3, \"onClick\"]],\n    template: function OrderSummaryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n        i0.ɵɵtext(2, \"Order summary\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"span\");\n        i0.ɵɵtext(5, \"Item price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"span\");\n        i0.ɵɵtext(7);\n        i0.ɵɵpipe(8, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 1)(10, \"span\");\n        i0.ɵɵtext(11, \"Packing & Shipping\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"span\", 2);\n        i0.ɵɵtext(13, \"Free\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 3)(15, \"div\", 1)(16, \"span\");\n        i0.ɵɵtext(17, \"Total price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"span\");\n        i0.ɵɵtext(19);\n        i0.ɵɵpipe(20, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(21, OrderSummaryComponent_div_21_Template, 2, 0, \"div\", 4);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 3, ctx.totalPrice));\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 5, ctx.totalPrice));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isCheckout);\n      }\n    },\n    dependencies: [i4.NgIf, i5.Button, i4.CurrencyPipe],\n    encapsulation: 2\n  });\n  return OrderSummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}