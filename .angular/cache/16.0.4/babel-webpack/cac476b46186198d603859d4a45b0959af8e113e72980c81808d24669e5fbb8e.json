{"ast":null,"code":"import { Subject, takeUntil } from 'rxjs';\nimport { ProductsService } from '../../services/products.service';\nimport { CategoriesService } from '../../services/categories.service';\nimport { ActivatedRoute } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/products.service\";\nimport * as i2 from \"../../services/categories.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"primeng/checkbox\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../component /product-item/product-item.component\";\nfunction ProductListComponent_div_2_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"p-checkbox\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_div_2_div_3_Template_p_checkbox_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const category_r3 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(category_r3.checked = $event);\n    })(\"onChange\", function ProductListComponent_div_2_div_3_Template_p_checkbox_onChange_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.categoryFilter());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 9);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const category_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", category_r3.checked)(\"binary\", true)(\"inputId\", category_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", category_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r3.name);\n  }\n}\nfunction ProductListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"h4\");\n    i0.ɵɵtext(2, \"Categories\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProductListComponent_div_2_div_3_Template, 4, 5, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categories);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"col-4 \": a0,\n    \"col-12 \": a1,\n    \"col-6\": a2\n  };\n};\nfunction ProductListComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"products-product-item\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(2, _c0, !ctx_r1.isCategoryPage && ctx_r1.getScreenWidth > 700, !ctx_r1.isCategoryPage && ctx_r1.getScreenWidth < 700, ctx_r1.isCategoryPage && ctx_r1.getScreenWidth > 700));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r7);\n  }\n}\nconst _c1 = function (a0, a1) {\n  return {\n    \"col-9\": a0,\n    \"col-12\": a1\n  };\n};\nexport let ProductListComponent = /*#__PURE__*/(() => {\n  class ProductListComponent {\n    onWindowResize() {\n      this.getScreenWidth = window.innerWidth;\n    }\n    constructor(productsService, categoriesService, route) {\n      this.productsService = productsService;\n      this.categoriesService = categoriesService;\n      this.route = route;\n      this.products = [];\n      this.categories = [];\n      this.endSubs$ = new Subject();\n    }\n    ngOnInit() {\n      this.getScreenWidth = window.innerWidth;\n      this.route.params.subscribe(params => {\n        this.categoryId = params['categoryId'];\n        this.categoryId ? this._getProducts(this.categoryId) : this._getProducts();\n        this.categoryId ? this.isCategoryPage = true : this.isCategoryPage = false;\n      });\n      this._getCategories();\n    }\n    ngOnDestroy() {\n      this.endSubs$.next(void 0);\n      this.endSubs$.complete();\n    }\n    _getProducts(categoriesFilter) {\n      this.productsService.getProducts(categoriesFilter).pipe(takeUntil(this.endSubs$)).subscribe(products => {\n        this.products = products;\n      });\n    }\n    _getCategories() {\n      this.categoriesService.getCategories().pipe(takeUntil(this.endSubs$)).subscribe(category => {\n        this.categories = category;\n      });\n    }\n    categoryFilter() {\n      const selectedCategories = this.categories.filter(category => category.checked).map(category => category.id);\n      this._getProducts(selectedCategories);\n    }\n  }\n  ProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n    return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductsService), i0.ɵɵdirectiveInject(i2.CategoriesService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n  ProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductListComponent,\n    selectors: [[\"product-list\"]],\n    hostBindings: function ProductListComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function ProductListComponent_resize_HostBindingHandler($event) {\n          return ctx.onWindowResize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 6,\n    vars: 6,\n    consts: [[1, \"product-page\"], [1, \"grid\"], [\"class\", \"col-3\", 4, \"ngIf\"], [3, \"ngClass\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-3\"], [\"class\", \"field-checkbox\", 4, \"ngFor\", \"ngForOf\"], [1, \"field-checkbox\"], [3, \"ngModel\", \"binary\", \"inputId\", \"ngModelChange\", \"onChange\"], [3, \"for\"], [3, \"product\"]],\n    template: function ProductListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, ProductListComponent_div_2_Template, 4, 1, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 1);\n        i0.ɵɵtemplate(5, ProductListComponent_div_5_Template, 2, 6, \"div\", 4);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isCategoryPage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c1, !ctx.isCategoryPage, ctx.isCategoryPage));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      }\n    },\n    dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.Checkbox, i6.NgControlStatus, i6.NgModel, i7.ProductItemComponent],\n    encapsulation: 2\n  });\n  return ProductListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}